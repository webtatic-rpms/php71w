diff --git a/ext/sqlite3/config0.m4 b/ext/sqlite3/config0.m4
index 0e5fbc5d1dbc..78fd6224dc92 100644
--- a/ext/sqlite3/config0.m4
+++ b/ext/sqlite3/config0.m4
@@ -85,11 +85,11 @@ if test $PHP_SQLITE3 != "no"; then
       other_flags="$other_flags -DSQLITE_ENABLE_ICU=1"
     fi
 
+    AC_DEFINE(HAVE_SQLITE3_ERRSTR, 1, [have sqlite3_errstr function])
     PHP_SQLITE3_CFLAGS="-I@ext_srcdir@/libsqlite $other_flags $threadsafe_flags $debug_flags"
     PHP_INSTALL_HEADERS([ext/sqlite3/libsqlite/sqlite3.h])
   fi
 
-  AC_DEFINE(HAVE_SQLITE3_ERRSTR, 1, [have sqlite3_errstr function])
   AC_DEFINE(HAVE_SQLITE3,1,[ ])
 
   sqlite3_sources="sqlite3.c $sqlite3_extra_sources"
